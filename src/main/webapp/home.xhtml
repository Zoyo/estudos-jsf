<f:view id="ajaxEcho" xmlns="http://www.w3.org/1999/xhtml" 
	xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core" 
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.org/ui">
    <h:head >
		<script src="http://maps.google.com/maps/api/js?sensor=true" 
				type="text/javascript">
		</script>
		
		<h:outputStylesheet name="style.css" library="css" /> 
	</h:head>
	<h:body>

		<h:form id="form1">
			<p:growl autoUpdate="true" life="3000" />
			
			<p:layout>
				<p:layoutUnit position="north" header="Testes gerais de JSF" size="90">
					<p:menubar>
						<p:menuitem value="Desenvolver" url="javascript:alert('Em construção');" />
					</p:menubar>
				</p:layoutUnit>
				
				<p:layoutUnit position="center">
					<p:panelGrid id="gridGeral">
						<p:row>
							<p:column>
								<p:outputLabel for="inputLatitude">Latitude: </p:outputLabel>
							</p:column>
							<p:column>
								<p:inputText id="inputLatitude" required="true" value="#{myBean.latitude}" />
							</p:column>
						</p:row>
			    		
			    		<p:row>
							<p:column>
				            	<p:outputLabel for="inputLongitude">Longitude: </p:outputLabel>
							</p:column>
							<p:column>
				            	<p:inputText id="inputLongitude" required="true" value="#{myBean.longitude}" />
							</p:column>
			    		</p:row>        
			            
			            <p:row>
							<p:column>
				            	<p:commandButton action="#{myBean.adicionarMarcacao()}" value="Marcar" update="@form"/>
							</p:column>
							<p:column>
				            	<p:commandButton action="#{myBean.enderecoDeCasa()}" value="Minha Casa" update="@form"/>
							</p:column>
			            </p:row>
			            
			            <p:row>
							<p:column colspan="2">
					            <p:gmap center="-22.820492, -47.265501" 
					                    type="roadmap" 
					                    style="width:600px;height:400px"
					                    id="gmapa"
					                    model="#{myBean.simpleModel}"
					                    widgetVar="mapa">
					                    
										<p:ajax event="overlaySelect" listener="#{myBean.onClickNoMarcador}" />
										<p:ajax event="pointSelect" listener="#{myBean.capturarCoordenada}" update="gridGeral"/>
										
										<p:gmapInfoWindow rendered="#{myBean.overlayEhMarcador()}">
											<p:panelGrid columns="1">
												<p:commandButton value="Mostrar 10km de Raio" action="#{myBean.adicionaCirculo()}" update="gmapa"/>
												<p:commandButton value="Excluir" action="#{myBean.excluirMarcador()}" update="gmapa"/>
											</p:panelGrid>
										</p:gmapInfoWindow>
								</p:gmap>
							</p:column>	            
			            </p:row>
			            
			            <p:row>
			            	<p:column colspan="2">
			            		<p:commandButton action="#{myBean.limparMapa()}" value="Remover Marcações" update="gmapa"/>
			            	</p:column>
			            </p:row>
					</p:panelGrid>			
				</p:layoutUnit>				
			</p:layout>			
		</h:form>
	</h:body>
</f:view>